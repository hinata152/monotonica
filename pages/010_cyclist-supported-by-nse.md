+++
title = "Cyclist supported by NSE (Rev.2)"
hascode = false
date = Date(2022, 3, 28)
rss = "サイクリストの高速化を支えるシミュレーション技術を紹介します。（増補第2版）"
tags = ["tech"]
+++

# Cyclist supported by NSE (Rev.2)

サイクリストの高速化を支えるシミュレーション技術を紹介します。（増補第2版）

\toc

## Original Paper

* Crouch, T. N., Burton, D., LaBry, Z. A., & Blair, K. B. (2017). Riding against the wind: a review of competition cycling aerodynamics. Sports Engineering, 20(2), 81-110. DOI:[10.1007/s12283-017-0234-1](https://link.springer.com/article/10.1007/s12283-017-0234-1)
  * This work is licensed under a Creative Commons Attribution 4.0 International License. [Creative Commons — Attribution 4.0 International — CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)

## はじめに：この論文について

[Side by Side Radioエピソード21](https://sidebysideradio.libsyn.com/sxsradio-21)で紹介されていた、自転車の空力に関するレビュー論文。
空力測定のための実験とシミュレーションの技術、そしてそれらに基づいた自転車の高速化の歴史を一望することができる。
論文の全体像はエピソードですでに紹介されているので、ここではComputer-Aided-Engineeringに関連するパートとして3.3節に絞って読んでいく。

## Computational Fluid Dynamics (CFD)

複雑な形状であるサイクリストの周りの流れは、かつては実験的に調べられてきたが、近年では (1) 計算機性能の向上、(2) 格子生成技術の改良、そして (3) 剥離予測に対する乱流モデルの進歩　から、現在ではコンピューターシミュレーションによる解析が実用的に行われるようになった。
Computational Fluid Dynamics (CFD) と称されるこの技術は、種々のスポーツにおける空力問題を解くのに活用されている：たとえばF1、ヨットレース、水泳、サッカー、クリケットなどで、サイクリングもそのうちのひとつ。
自転車のホイールなどのコンポーネントに対する流れの解析が行われたり、ライダーの姿勢による空力の違いを調べるものまで色々ある。

CFDのよいところとして、**実験的に取得が困難なデータであっても得られる**点がまず挙げられる。
実験で取得できるのは基本的に物体表面でのデータであって、それも時間方向に解像度を持たないことがままあるけれども、対してCFDでは時空間にわたる流れの情報を得ることができる。

また、前述のエピソードでも紹介されていたように、**計測系に影響を与えずに計測ができる**ことも強みのひとつ。
自転車（二輪車）は静止時に自立できないので、実験に供するうえでなんらかのサポートが必要になる（たとえば実際の風洞実験の様子 [^1] を見ると、後輪のシャフト部を左右一対のサポートが支えている）。
実験ではこのサポートの存在で空力が変わってしまう懸念が残る一方、CFDでは理想的な計測状況、すなわち自転車とライダーと地面だけがある状況での流れを調べることができる。

さらに、これもエピソードで言及されていた通り、**各コンポーネント毎の空気抵抗を調べることができる**。
自転車に加わる空気抵抗の内訳として、論文ではTable 2に頭、腕、胴体 (torso [^2] )、左右の足、そして自転車本体のそれぞれの寄与率が示されている。
これを実験で得ようとするとなかなか大変だけれど、CFDならば容易に算出することが可能となる。

こうした空力的な観点に加えて、ライダーの暑さ対策にとって重要な熱伝達、すなわち冷却に関する情報もCFDで得ることができる。
また、実験では設備の都合で一度にひとつの解析しかできないところを、CFDでは計算機資源さえ十分にあれば並列でシミュレーションを実施することもできる。
これだけ見ればCFDは良いことづくめだ。

論文のFig. 7にシミュレーションの様子の図がある。左側の図からは、自転車に乗ったライダーからどのように流れが乱れて後方へと流れ去っていくかを見ることができる。
また右の図はエピソードでも話されていた話題で、一人で走っているときよりもドラフティング [^3] の場合のほうが、前の人が少しだけ楽になる様子が示されている。

## Navier-Stokes Equations (NSE)

流体運動を支配するのは[ナビエ–ストークス方程式](https://ja.wikipedia.org/wiki/%E3%83%8A%E3%83%93%E3%82%A8%E2%80%93%E3%82%B9%E3%83%88%E3%83%BC%E3%82%AF%E3%82%B9%E6%96%B9%E7%A8%8B%E5%BC%8F)であって、この方程式は質量、運動量、エネルギーの保存則に基づいている。
この方程式で、流体であればなんでも――天気、海流、そしてサイクリストの流れまで――解析することができる。
この方程式をどのように計算機に解かせているかについては、例えばウェブサイト [^4] が参考になる。

CFDにも乱流のモデリングの度合いに応じていくつかの種類がある：

* 乱流をまったくモデル化しないシミュレーションはDirect Numerical Simulation (DNS [^5] ) と呼ばれる。しかしDNSはとてつもなく高い計算コストを要求するので、実用上はあまり使われない。
  * なぜ計算コストが高くつくかというと、流れの慣性力が大きくなるにつれて、その9/5乗で流れの物理スケールが小さくなり、それを捉えるのが急激に大変になるから。
* 自転車ほどの速さの流れをDNSで解くにはコストが高すぎるので、種々の平均化操作や乱流のモデリングを行わなければならない。
  * 一般的なモデリングとしてReynolds Averaged Navier–Stokes equations (RANS)。このモデリングによって時間平均した流れが得られる。
  * 他のモデリングとしてLarge Eddy Simulations (LES)。このモデリングによって部分的に空間平均した流れが得られる。
  * そのほかのモデリングとしてDetached Eddy Simulations (DES)。大きな乱流運動は時空間で解くけれども、小さなスケールの影響はモデル化する。

ここで大事なのは、**CFDの解析結果は初期条件、境界条件、格子サイズ、時間ステップサイズ、用いる乱流モデルによって非常に変化しうるものである**、ということ。
すなわち流れをシミュレーションしたからといって、その結果が即座に正しいとは限らない。
そのため、研究と産業利用のいずれであっても、**最高のアウトカムはCFDと実験を組み合わせることによって得られる**のである。
これがCFDが普及した現代においてなお実験が必要とされる理由といえる。

## 計算と実験を組み合わせる

CFDをうまくやるうえで最も大切なのは、その解析結果が基本的な物理を捉えている、という確証を示すことである。
これは自転車を対象とした解析に限らず、またCFDに限った話でもなくて、シミュレーション全般に言えることでもある。
CFDでいうと、もし格子や時間ステップに依存しない解が得られたならば、その結果を実験結果と照らし合わせることで妥当性を確認することができる。

論文のTable 3には先行研究でのシミュレーション結果が並べられていて、この中にある**Validation**という項目で、どのようにシミュレーションの妥当性を確認したかが示されている。
"Athlete-CDA" とあるのはおそらくアスリートが風洞の中で漕いでみた実測値、"1:x model-CDA”とあるのはスケールモデルを使った実験結果と照らし合わせてみたものだと思われる。
そしてその右側の項目、**Variation**というのがどれくらい実験結果と合っていたか、だと思うのだけれど……**単位が書かれていない**ので、この数字からどれくらいの解析のクオリティがあるのかを推し量るのは難しい。
（無次元数であるCDを比較しているのならば、CDのオーダーはTable 1にあるようにたかだかO(1)～O(0.01)なので、表に出てくる数字とは合わない）

第2版追記：[maz](https://twitter.com/dynamicsoar)さんがこの値の謎を解いてくださっています。

~~~
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://twitter.com/hinahypersonica?ref_src=twsrc%5Etfw">@hinahypersonica</a> さんのブログ記事 ( <a href="https://t.co/dPxHV0A7Xo">https://t.co/dPxHV0A7Xo</a> ) も読んだ。Table 3 の右端の Variation の数字は refs. 37, 42 の論文を見たらいずれも C_D*A の実験値と計算(CFD)値の差のパーセントだった（ただ、これら2つで定義の引き算の方向が逆なのに無視されてる…まぁ細かいが）</p>&mdash; maz (@dynamicsoar) <a href="https://twitter.com/dynamicsoar/status/1495727961819197442?ref_src=twsrc%5Etfw">February 21, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
~~~

そもそも並べられている解析は別々の論文からの引用であって、解析同士に関連は無いので、それらの良い悪いを横並びで比較するのは難しいのだろう。
レビュー論文として、こんなモデルが使われているとか、こんな計算スペックで解析されているんだな、と知る程度にとどめておくのが良いかもしれない。

## おわりに

レビュー論文という性質もあって、実験とシミュレーションの話題を並列して紹介しているところ、また双方の重要性を説いているあたりが良いなあと思いながら読んだ。

前述した最高のアウトカムの由来は、原文では以下のように記述されている。
シミュレーションをうまくやるためには、その立脚点である現実世界をより良く知るのが大事だということ。

> the best outcomes, both in research and industry, arise when CFD is used in combination with an experimental test programme.

なお半分余談として、タイトルに挙げた**NSE**というのはナビエ–ストークス方程式 (Navier–Stokes Equations) の略語として本文中に登場する。
大学時代の流体力学の講義ではこんな略し方はしなかったし、いやマクスウェル方程式をMEと呼んだり、シュレーディンガー方程式をSEと呼んだりしなくない？……と思ってたら、少しネットで調べてみるとそのように略す文化圏もあるらしい、とわかった。
NSEもそうだし、CRE [^6] とか、複数の人名を冠した方程式だと少しだけご利益がありそう。
ひとつ勉強になった。

[^1]: [サイクリストと空力の関係性を究める | RedBull](https://www.redbull.com/jp-ja/igor-amorelli-no-t%C3%BAnel-de-vento-do-ipt-usp)
[^2]: トルソーってなんだっけ……と、辞書を引いてしまった
[^3]: [風洞実験の様子](https://www.youtube.com/watch?v=oqx33up28A4)。空気抵抗がリアルタイムで表示されるグラフが床面に投影されていて、風を遮るように自転車の正面に人が立つことで空気抵抗が下がる様子が見て取れる。
[^4]: [コンピュータ・シミュレーションでできること・わかること | 理化学研究所 計算科学研究センター](https://aics.riken.jp/jp/learnmore/compsimulation.html)
[^5]: Not [Domain Name System](https://ja.wikipedia.org/wiki/Domain_Name_System)
[^6]: [コーシー・リーマンの方程式](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%BC%E3%82%B7%E3%83%BC%E3%83%BB%E3%83%AA%E3%83%BC%E3%83%9E%E3%83%B3%E3%81%AE%E6%96%B9%E7%A8%8B%E5%BC%8F)

## 増補：お礼、そして風洞の話題

上の文章を書いたのは2021年1月の話。
2020年12月に開催された[Researchat.fm Lightning Talk Vol.01](https://researchat.fm/blog/8/)の懇親会で[Side by Side Radio](https://sidebysideradio.libsyn.com/)を教えてもらって間もない当時、過去回を掘っていく過程で今回の[エピソード21](https://sidebysideradio.libsyn.com/sxsradio-21)を見つけた。
エピソードの公開が2018年12月なので、約2年越しに言及するような形になってしまったけれども、その後このエピソードのショーノートでも取り上げていただけたのは嬉しかった。
どうもありがとうございました。

記事冒頭で少し触れた通り、このレビュー論文がカバーしている領域は自転車の空力シミュレーションにとどまらない。
記事で紹介した3.3節がシミュレーションの話題なのに対して、その前の3.1, 3.2節は風洞試験に関する解説になっている。
最高のアウトカムを得るべく実験についても知見を深めようと思ったので、これらの節についても読んでいく。

風洞試験設備の多くは自動車や航空機産業といった背景を持っていて、そうしたものが自転車の空力実験にも用いられている；
しかし、自転車メーカーの中には自前の自転車用の風洞を開発しているところもある。

"**風洞とは、固定した模型の周りに空気を流し、大気中を飛んでいる状態を模擬し、その模型に働く力やその周りの風の流れを計測する試験設備です。**" [^7]
通常であれば静止した空気中を自転車が走行していくのに対し、風洞では逆に固定させた自転車に風を当てることでその状態を再現する。
もし走行中の状態をより厳密に再現しようとするならば、走行中の地面の動き（自転車に乗っている人から見ると、地面は風と同じ速度で後ろに流れ去っていくように見える）も取り入れてやる必要がある。
ムービングベルト [^8] と呼ばれる自動車業界ではメジャーなこの装置は、しかしサイクリストの場合には主要なコンポーネントが地面から離れていることから、その影響は自動車ほど問題にはならない（もちろん地面に設置しているホイールなどを考えるときにはまた別である）。

風洞は一般的に乱れの少ない一様流を作り出すように設計されていて、その意味では現実の走行を単純化した条件での測定を行っている。
現実の走行状態との差は、たとえば現実では流れが一様でなかったり、横風が吹いていたり、突風が吹いたり、あるいは走行中の他のサイクリストの影響など多岐にわたる。
論文によれば "**Currently, there are no standard wind tunnel test conditions for the aerodynamic evaluation of cyclists.**" とのことで、サイクリストの空力評価のための統一的な実験条件というものは今のところ（論文が発行された2017年時点では）存在しないらしい。

風洞には大きくわけて2通りあって、閉じた回流式になっているタイプ (*Goettingen* type) と、そうでない開いた吹き流しのタイプ (*Eiffel* type) がある。
前者のGoettingenとは地名であり、後者のEiffelとは人名に由来する。
Eiffelとはエッフェルであり、エッフェル塔の設計者と同一人物である（今回調べてみるまで知らなかった）。文献 [^9] によれば、彼はその晩年に空力の研究に取り組んでいたらしいことが窺える。

流路のつくりとは別に、テストセクションが壁に覆われている (fully closed) か、開放空間 (open-jet) になっているかでまた区別がある。
それぞれに利点と課題がある。
Figure 5で示されているのはopen-jet型の風洞である。
キャプションには**full-scale testing**とあり、"Open-jet test section & turntable" と書かれた箇所に実大の自転車とライダーを見ることができる。
自転車や自動車であれば縮尺模型ではなく、実大の模型もしくは本物を入れることが（やろうと思えば）できる。
かつての飛行機でも同じ試みがなされていて、たとえば前述のEiffelとの関連でいえば、文献 [^10] [^11] によるとS1Chと呼ばれる風洞は実機を入れられる大きさで作られたとある。
現在の大型化した飛行機は風洞には収まりきらないので、模型を使わざるを得ない場面がほとんどだけれども、それでも実機の条件に近づけるための工夫は加圧式風洞 [^12] や低温風洞 [^13] に見られる。

風洞はその理想的な測定条件を保つために、流れをあまり塞ぎすぎないほうがよい、いいかれば前方投影面積と流路面積の比で表される*blockage ratio*を5%以下にとどめるのがよいとされる。
自転車でも、たとえば複数台が隊列を組んだ条件での測定では*blockage ratio*が高くなるので、結果の解釈には注意を伴う。
ところでサイクリストの前方投影面積というのは測定が難しい面もあることから、抵抗値は面積で除さず・動圧で除しただけのCDAという係数で表現されることがある。ここにCDではなくCDAで表す理由がある。

最後に結果の再現性の問題について触れられている。
サイクリスト本人が実際に風洞に入るときには、その乗車姿勢の再現はライダーに委ねられているけれども、ライダーの疲労の問題や厳密な再現性も気になる。
人体模型 (mannequin) を使えばこうした問題はある程度は解決できる。
それ以外のご利益として、アスリートが風洞に入っていてはできない計測手法や計測装置を使うこともできる。
Figure 6では模型を使うからこそできる測定の例、PIVとSurface oil flow visualisationsが挙げられている。
Figure 6 (c) ではスケールモデルはrapid prototypingで作られたとあり、昨今の（といってもかなり成熟が見られてきた）3次元造形技術によって試験環境が変わった様子が確認できる。

調べている最中に、おそらく計測機器のメーカーが書いたのだろうと思われるけれども、最近のとある記事 [^14] を見つけた。
風洞ワールドマップが見ていて面白い。
一部の地域にはプロットが見られないのは、これは風洞設備がないのではなくて情報が公開されていないのだろう。
そのあたりの機密性がはたらく事情はスーパーコンピュータとも似ているように思う。

[^7]: [第1回「風洞とは何か」](https://www.aero.jaxa.jp/spsite/wind-tunnel/001.html)
[^8]: [動く床！！ | ムーンクラフト STAFF BLOG](https://www.mooncraft.jp/blogstaff/aerodynamic/moving-belt/)
[^9]: John D. Anderson Jr., "Introduction to Flight (Eighth Edition)" McGraw-Hill Inc. (2016), p.577.
[^10]: Chanetz, B. (2017). A century of wind tunnels since Eiffel. Comptes Rendus Mécanique, 345(8), 581-594. DOI:[10.1016/j.crme.2017.05.012](https://www.sciencedirect.com/science/article/pii/S1631072117300888)
[^11]: [Chalais-Meudon](https://en.wikipedia.org/wiki/Chalais-Meudon#Wind_Tunnel)
[^12]: [Low Speed Pressurized Wind Tunnel - Onera](https://www.onera.fr/sites/default/files/windtunnel/pdf/F1-2018.pdf)
[^13]: [The cryogenic wind tunnel concept for high Reynolds number testing](https://ntrs.nasa.gov/citations/19750003928)
[^14]: [The List of Wind Tunnel Testing Facilities | DEWESoft](https://dewesoft.com/daq/list-of-wind-tunnel-testing-facilities)
