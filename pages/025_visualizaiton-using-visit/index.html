<!doctype html> <html lang=ja > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=preconnect  href="https://fonts.googleapis.com"> <link rel=preconnect  href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&family=Zen+Kaku+Gothic+New:wght@500&display=swap" rel=stylesheet > <link rel=stylesheet  href="/monotonica/css/franklin.css"> <link rel=stylesheet  href="/monotonica/css/poole_lanyon.css"> <link rel=stylesheet  href="/monotonica/css/adjust.css"> <link rel=icon  href="/monotonica/assets/favicon.png"> <title>VisItでの可視化メモ</title> <input type=checkbox  class=sidebar-checkbox  id=sidebar-checkbox > <div class=sidebar  id=sidebar > <div class=sidebar-item > <p>A theme adapted from <a href="http://lanyon.getpoole.com/" target=_blank >Lanyon</a>.</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/monotonica/">Home</a> <a class="sidebar-nav-item " href="/monotonica/about/">About</a> <a class="sidebar-nav-item " href="/monotonica/tag/tech/">Tech</a> <a class="sidebar-nav-item " href="/monotonica/tag/misc/">Misc</a> <a class="sidebar-nav-item " href="/monotonica/license-monotonica/">License</a> </nav> <div class=sidebar-item > <p>&copy; hinagata.</p> </div> </div> <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --> <div class=wrap > <div class=masthead > <div class=container > <h3 class=masthead-title > <a href="/monotonica/" title=Home >monotonica</a> <small>Engimono Notebook and more</small> </h3> </div> </div> <div class="container content"> <div class=franklin-content > <h1 id="visitでの可視化メモ"><a href="#visitでの可視化メモ" class=header-anchor >VisItでの可視化メモ</a></h1> <p>解析結果をVisItで可視化するときのメモ。</p> <div class=franklin-toc ><ol><li><a href="#背景">背景</a><li><a href="#技術選定">技術選定</a><li><a href="#導入と結果">導入と結果</a></ol></div> <h2 id="背景"><a href="#背景" class=header-anchor >背景</a></h2> <p>これまでの準1次元ノズルフロー問題では、結果を確認するのにおもにx-yグラフでのプロットを用いてきた。 準1次元流れを扱っているうちはこれで良いのだけど、将来的により複雑な流れを取り扱うさいには流れの2次元性を考慮してそれをプロットしてやる必要がある。</p> <p>準1次元でない流れ場の一例として、文献 <sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup> に近い問題設定がされた<a href="https://www.jsass.or.jp/publications/733/">2次元版のコード</a>では、2次元の流れ場データをTecplot形式で出力するようになっている。 このファイルを手元で可視化できるようにすることを考える。なお当然ながらTecplotを使うのがストレートなやり方であるものの、ここでは取り扱わない。</p> <h2 id="技術選定"><a href="#技術選定" class=header-anchor >技術選定</a></h2> <p>（ゆくゆくは3次元場を扱うかもしれないが）まずは2次元場で考えると、手頃に使えそうなJuliaパッケージとして<a href="https://makie.juliaplots.org/stable/">Makie</a>があるものの、<a href="https://makie.juliaplots.org/stable/examples/plotting_functions/contour/">contour</a>の<a href="https://makie.juliaplots.org/stable/examples/plotting_functions/contour/#examples">Examples</a>を見るに直交座標系が前提となっている様子だった。 <a href="https://docs.juliaplots.org/latest/">Plots</a>パッケージの<a href="https://docs.juliaplots.org/latest/gallery/gr/generated/gr-ref22/#gr_demo_22">Contours</a>も同様に直交座標系が前提の様子だった。</p> <p>そのほかに<a href="https://dash.plotly.com/julia/vtk/intro">Dash</a>というパッケージを見つけて、これは3次元での可視化ができそうな様子だったが、今やりたいこととは少しずれているような気がしたので見送り。</p> <p>Juliaで直接可視化するのは一旦は諦めて、Juliaから出力したファイルを別のソフトで可視化する方針を探ることにした。（これだとFortranでやっていることと変わらなくなってしまうので少し残念）</p> <p><a href="https://www.jsass.or.jp/publications/733/">2次元版のコード</a>提供元が用意した<a href="https://www.jsass.or.jp/wp-content/uploads/2018/11/ReadMeFirst-LavalNozzle.pdf">注意書き</a>によれば、結果の可視化において<strong>フリーソフトではVisItの利用実績があります</strong>とある。</p> <p><a href="https://visit-dav.github.io/visit-website/">VisItの公式サイト</a>を見ると種々の可視化事例とともに、GitHubでソースコード管理がなされていることがわかった。また<a href="https://visit-dav.github.io/visit-website/admin/VisIt-20yrs-ctr/">過去のブログ記事</a>を読むと、新しい技術を積極的に導入しつつ開発が進められている様子もわかった。こうした姿勢に賛同できたこと、また技術のスジの良さが感じられたことから、今回はVisItを使わせてもらうことにした。</p> <h2 id="導入と結果"><a href="#導入と結果" class=header-anchor >導入と結果</a></h2> <p>VisItをインストールして、<a href="https://www.jsass.or.jp/publications/733/">2次元版のコード</a>のうちノズル内流れの解析より得られたTecplot形式の出力データ<code>tec-ln.plt</code>を読み込ませたところ、それらしき可視化図を表示させることができた。</p> <p><img src="/monotonica/pages/img/2022-07-18-17-14-15.png" alt="" /></p> <ul> <li><p>いくつかの変数のうちマッハ数を可視化している。流入部分で亜音速の流れがスロート部に向けて加速し、スロート部でマッハ数1をとったあと、スロート以降の拡大管部分で更に加速している。</p> <ul> <li><p>contourではなくてPseudocolorにすることで2次元場に色が付いた。細かい設定はまだよくわからない。</p> </ul> <li><p>可視化はできたけれども、さらに複雑な後処理までVisIt上でこなせるかどうかは要確認。</p> </ul> <table class=fndef  id="fndef:1"> <tr> <td class=fndef-backref ><a href="#fnref:1">[1]</a> <td class=fndef-content >John D. Anderson, &quot;Computational Fluid Dynamics: The Basics With Applications,&quot; McGraw-Hill Inc. &#40;1995&#41; </table> <div class=page-foot > &copy; hinagata. Last modified: January 07, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. <a href="https://hinata152.github.io/monotonica/about/#%E5%85%8D%E8%B2%AC%E4%BA%8B%E9%A0%85">免責事項</a> </div> </div> </div> </div> <label for=sidebar-checkbox  class=sidebar-toggle ></label>