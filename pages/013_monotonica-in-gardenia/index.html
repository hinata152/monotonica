<!doctype html> <html lang=ja > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=preconnect  href="https://fonts.googleapis.com"> <link rel=preconnect  href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&family=Zen+Kaku+Gothic+New:wght@500&display=swap" rel=stylesheet > <link rel=stylesheet  href="/monotonica/libs/katex/katex.min.css"> <link rel=stylesheet  href="/monotonica/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/monotonica/css/franklin.css"> <link rel=stylesheet  href="/monotonica/css/poole_lanyon.css"> <link rel=stylesheet  href="/monotonica/css/adjust.css"> <link rel=icon  href="/monotonica/assets/favicon.png"> <title>monotonicaの運用メモ</title> <input type=checkbox  class=sidebar-checkbox  id=sidebar-checkbox > <div class=sidebar  id=sidebar > <div class=sidebar-item > <p>A theme adapted from <a href="http://lanyon.getpoole.com/" target=_blank >Lanyon</a>.</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/monotonica/">Home</a> <a class="sidebar-nav-item " href="/monotonica/about/">About</a> <a class="sidebar-nav-item " href="/monotonica/tag/tech/">Tech</a> <a class="sidebar-nav-item " href="/monotonica/tag/misc/">Misc</a> <a class="sidebar-nav-item " href="/monotonica/license-monotonica/">License</a> </nav> <div class=sidebar-item > <p>&copy; hinagata.</p> </div> </div> <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --> <div class=wrap > <div class=masthead > <div class=container > <h3 class=masthead-title > <a href="/monotonica/" title=Home >monotonica</a> <small>Engimono Notebook and more</small> </h3> </div> </div> <div class="container content"> <div class=franklin-content > <h1 id="monotonicaの運用メモ"><a href="#monotonicaの運用メモ" class=header-anchor >monotonicaの運用メモ</a></h1> <p>monotonicaのカテゴリ分けを変更したメモ。</p> <div class=franklin-toc ><ol><li><a href="#背景">背景</a><li><a href="#実装">実装</a><li><a href="#結果">結果</a><li><a href="#参考">参考</a></ol></div> <h2 id="背景"><a href="#背景" class=header-anchor >背景</a></h2> <p>monotonicaのサイドバーにはResearchという項目を用意していて、これはGitHubのリポジトリとは別に外部公開しない研究のコンテンツをフォルダに置きながら、ローカルホストで使うことを想定していた。</p> <p>けれど外部公開するものとそうでないものの関係を考えたとき、まずは公開を前提としない自分の考えなり記録があって、そこから外部公開できる部分を切り出してきて記事にする、という流れが（自分にとっては）自然であった。 言い換えると、monotonicaが外部公開を前提としたコンテンツ群なのに対して、こうした自分の考えや記録の全体をかりに<em>Gardenia</em> <sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup> と呼ぶとすれば、包含関係としては <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>o</mi><mi>n</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>n</mi><mi>i</mi><mi>c</mi><mi>a</mi><mo>∈</mo><mi>G</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>i</mi><mi>a</mi></mrow><annotation encoding="application/x-tex"> monotonica \in Gardenia </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.6986em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">ni</span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.6944em;"></span><span class="mord mathnormal">G</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">nia</span></span></span></span> ということになる。 Franklinでこうしたサイト構成が実現できないかを検討した。</p> <h2 id="実装"><a href="#実装" class=header-anchor >実装</a></h2> <p>前述のような多重化した構成での運用はFranklinでは想定されていないだろうとは思いつつ、以下のようなフォルダ構成とした。</p> <pre><code class="julia hljs">gardenia
│
│  .gitignore
│  ...
│  config.md
│  ...
│
├─monotonica
│   │
│   │ ...
│   │
│   ├─...
│   │
│   ├─pages
│   │
│   ...
│
├─notes
│
├─references
│
├─_assets
│
├─_css
│
├─_layout
│
├─_libs
│
├─_rss
│
└─__site
    │
    ├─...
    │
    ├─pages（シンボリックリンク）
    │
    ...</code></pre> <p>gardeniaとmonotonicaはそれぞれFranklinの<code>newsite&#40;&#41;</code>で作成したもの。 親にあたるgardeniaの側で以下の設定を行った。</p> <ul> <li><p>.gitignoreには、monotonicaフォルダ以下をバージョン管理から無視する設定を追加</p> <li><p>config.mdではmonotonica下の不要なフォルダ群を<code>__site</code>以下に作らないよう、変数ignoreに追記</p> </ul> <pre><code class="julia hljs">ignore = [..., <span class=hljs-string >&quot;monotonica/node_modules/&quot;</span>, <span class=hljs-string >&quot;monotonica/_assets/&quot;</span>, <span class=hljs-string >&quot;monotonica/_css/&quot;</span>, <span class=hljs-string >&quot;monotonica/_layout/&quot;</span>, <span class=hljs-string >&quot;monotonica/_libs/&quot;</span>, <span class=hljs-string >&quot;monotonica/_rss/&quot;</span>]</code></pre>
<ul>
<li><p><code>__site</code>フォルダにmonotonica/pageへのシンボリックリンクを作成（「管理者として実行」で起動したコマンドプロンプトにて以下のコマンドを実行）</p>
<ul>
<li><p>シンボリックリンクを置くことで、特別にパスを修正することなく表示させることができる。</p>

<li><p>副作用として、親側での記事を入れるフォルダ名に<code>pages</code>が使えないので、<code>notes</code>と<code>references</code>で代用した。フォルダでなくファイル単位でシンボリックリンクを作成すれば回避できるのかもしれないが、さすがに手間だと考えてやめた。</p>

</ul>

</ul>
<pre><code class="julia hljs">&gt; cd __site
&gt; mklink /D pages （途中までのパス）\monotonica\pages
pages &lt;&lt;===&gt;&gt; （途中までのパス）\monotonica\pages のシンボリック リンクが作成されました</code></pre>
<ul>
<li><p>&#40;optional&#41; サイドバーの設定ファイル <code>_layout/sidebar.html</code> において以下を<code>&lt;a class&#61;&quot;sidebar-nav-item...</code> の並びに追記</p>

</ul>
<pre><code class="julia hljs">&lt;a class=<span class=hljs-string >&quot;sidebar-nav-item {{ispage monotonica/*}}active{{end}}&quot;</span> href=<span class=hljs-string >&quot;/monotonica/&quot;</span>&gt;monotonica&lt;/a&gt;</code></pre>
<ul>
<li><p>&#40;optional&#41; <code>_css/franklin.css</code>と<code>_css/poole_lanyon.css</code>でフォントの設定</p>
<ul>
<li><p>ローカルホストでしか動かさないので、Webフォントは使わずに直接指定した。</p>

</ul>

</ul>
<h2 id="結果"><a href="#結果" class=header-anchor >結果</a></h2>
<p>親にあたるgardeniaの下で<code>serve&#40;&#41;</code>した場合、サイドバーにmonotonicaへのリンクが表示され、ここをクリックすることでコンテンツにアクセスできるようになった。</p>
<p><img src="/monotonica/pages/img/20220505113825.png" alt=monotonica-in-gardenia  /></p>
<p>一方、子にあたるmonotonicaの下で<code>serve&#40;&#41;</code>した場合にはこれまで通りに（このサイトで表示されている通りに）表示できる。</p>
<p>monotonicaのサイドバーにあったResearchカテゴリは使う見込みがなくなったので、削除した。</p>
<h2 id="参考"><a href="#参考" class=header-anchor >参考</a></h2>
<ul>
<li><p><a href="/monotonica/pages/001_engimono-migration/">縁起物の式年遷宮</a></p>

<li><p><a href="/monotonica/pages/008_changing-font-in-monotonica/">monotonicaのフォント設定</a></p>

</ul>
<table class=fndef  id="fndef:1">
    <tr>
        <td class=fndef-backref ><a href="#fnref:1">[1]</a>
        <td class=fndef-content >梔子（くちなし）。学名 <em>Gardenia jasminoides</em>
    
</table>

<div class=page-foot >
    &copy; hinagata. Last modified: January 21, 2023.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
    <a href="https://hinata152.github.io/monotonica/about/#%E5%85%8D%E8%B2%AC%E4%BA%8B%E9%A0%85">免責事項</a>
</div>
</div>
      </div>  
    </div> 
    
        



    
    
        <script src="/monotonica/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>

    
    <label for=sidebar-checkbox  class=sidebar-toggle ></label>